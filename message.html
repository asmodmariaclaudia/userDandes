<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./assets/css/message.css">
    <title>Document</title>
</head>
<body>
    <div class="preload" data-preaload>
      <div class="circle"></div>
      <p class="text">Dande's</p>
    </div>
    <div class="panel">
        <div class="items">
            <div class="logoHolder">
                <img src="./assets/images/DANDEâ€™S.png" alt="" class="logo">
            </div>
            <div class="profilePicHolder">
              <img src="./assets/images/porf.jpg" alt="Admin Profile" class="profilePic">
            </div>
            <div class="say">
                <h3>You are now chatting with the owner</h3>
            </div>
        </div>
    </div>
    <div class="chat">
        <div class="chat-container">
            <div class="messages-container" id="messages"></div>
            <div class="message-input-container">
              <input type="text" id="messageInput" placeholder="Type a message...">
              <button id="sendButton">Send</button>
            </div>
          </div>
    </div>
  
    <script>
      const messagesDiv = document.getElementById('messages');
      const messageInput = document.getElementById('messageInput');
      const sendButton = document.getElementById('sendButton');
      const ws = new WebSocket('ws://localhost:3000');
    
      ws.addEventListener('message', (event) => {
        const message = event.data;
        displayMessage(message);
      });
    
      sendButton.addEventListener('click', () => {
        const message = messageInput.value;
        ws.send(message);
        displayMessage(message, true);
        messageInput.value = '';
      });
    
      function displayMessage(message, isSender = false) {
        const messageContainer = document.createElement('div');
        const messageElement = document.createElement('div');
        messageElement.textContent = message;
        
        messageContainer.classList.add('message-container');
        
        if (isSender) {
          messageContainer.classList.add('sender-message-container');
          messageElement.classList.add('message-bubble', 'sender-message-bubble');
        } else {
          messageElement.classList.add('message-bubble');
        }
        
        messageContainer.appendChild(messageElement);
        messagesDiv.appendChild(messageContainer);
        
        messagesDiv.scrollTop = messagesDiv.scrollHeight;
      }
    </script>
    
  </body>
</html>